(window.webpackJsonp=window.webpackJsonp||[]).push([[1],Array(51).concat([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.samplesToSeconds=function(e,t){return e/t},t.secondsToSamples=function(e,t){return Math.ceil(e*t)},t.samplesToPixels=function(e,t){return Math.floor(e/t)},t.pixelsToSamples=function(e,t){return Math.floor(e*t)},t.pixelsToSeconds=function(e,t,n){return e*t/n},t.secondsToPixels=function(e,t,n){return Math.ceil(e*n/t)}},function(e,t){e.exports=function(e){return e&&"Widget"===e.type}},function(e,t){e.exports="2"},function(e,t,n){var i=n(53);e.exports=function(e){return e&&"VirtualNode"===e.type&&e.version===i}},function(e,t,n){var i=n(126);e.exports=i},function(e,t){e.exports=function(e){return e&&"Thunk"===e.type}},function(e,t,n){var i=n(53);e.exports=function(e){return e&&"VirtualText"===e.type&&e.version===i}},function(e,t){e.exports=function(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FADEOUT=t.FADEIN=t.LOGARITHMIC=t.EXPONENTIAL=t.LINEAR=t.SCURVE=void 0,t.createFadeIn=function(e,t,n,u){switch(t){case r:(function(e,t){var n=(0,i.sCurve)(1e4,1);this.setValueCurveAtTime(n,e,t)}).call(e,n,u);break;case a:(function(e,t){this.linearRampToValueAtTime(0,e),this.linearRampToValueAtTime(1,e+t)}).call(e,n,u);break;case o:(function(e,t){this.exponentialRampToValueAtTime(.01,e),this.exponentialRampToValueAtTime(1,e+t)}).call(e,n,u);break;case s:(function(e,t){var n=(0,i.logarithmic)(1e4,10,1);this.setValueCurveAtTime(n,e,t)}).call(e,n,u);break;default:throw new Error("Unsupported Fade type")}},t.createFadeOut=function(e,t,n,u){switch(t){case r:(function(e,t){var n=(0,i.sCurve)(1e4,-1);this.setValueCurveAtTime(n,e,t)}).call(e,n,u);break;case a:(function(e,t){this.linearRampToValueAtTime(1,e),this.linearRampToValueAtTime(0,e+t)}).call(e,n,u);break;case o:(function(e,t){this.exponentialRampToValueAtTime(1,e),this.exponentialRampToValueAtTime(.01,e+t)}).call(e,n,u);break;case s:(function(e,t){var n=(0,i.logarithmic)(1e4,10,-1);this.setValueCurveAtTime(n,e,t)}).call(e,n,u);break;default:throw new Error("Unsupported Fade type")}};var i=n(64),r=t.SCURVE="sCurve",a=t.LINEAR="linear",o=t.EXPONENTIAL="exponential",s=t.LOGARITHMIC="logarithmic";t.FADEIN="FadeIn",t.FADEOUT="FadeOut"},function(e,t){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(e){return"[object Array]"===i.call(e)}},function(e,t,n){"use strict";var i=n(136)();e.exports=function(e){return e!==i&&null!==e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linear=function(e,t){var n,i,r=new Float32Array(e),a=e-1;for(n=0;n<e;n++)i=n/a,r[n]=t>0?i:1-i;return r},t.exponential=function(e,t){var n,i,r=new Float32Array(e),a=e-1;for(n=0;n<e;n++)i=n/a,r[t>0?n:e-1-n]=Math.exp(2*i-1)/Math.exp(1);return r},t.sCurve=function(e,t){var n,i=new Float32Array(e),r=t>0?Math.PI/2:-Math.PI/2;for(n=0;n<e;++n)i[n]=Math.sin(Math.PI*n/e-r)/2+.5;return i},t.logarithmic=function(e,t,n){var i,r=new Float32Array(e),a=0;for(i=0;i<e;i++)a=i/e,r[n>0?i:e-1-i]=Math.log(1+t*a)/Math.log(1+t);return r}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+"-"+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]+r[e[i++]]}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t,n){var i=n(99),r=n(98),a=r;a.v1=i,a.v4=r,e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STATE_FINISHED=t.STATE_DECODING=t.STATE_LOADING=t.STATE_UNINITIALIZED=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(70),o=(i=a)&&i.__esModule?i:{default:i};var s=t.STATE_UNINITIALIZED=0,u=t.STATE_LOADING=1,l=t.STATE_DECODING=2,c=t.STATE_FINISHED=3,f=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,o.default)();!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.src=t,this.ac=n,this.audioRequestState=s,this.ee=i}return r(e,[{key:"setStateChange",value:function(e){this.audioRequestState=e,this.ee.emit("audiorequeststatechange",this.audioRequestState,this.src)}},{key:"fileProgress",value:function(e){var t=0;this.audioRequestState===s&&this.setStateChange(u),e.lengthComputable&&(t=e.loaded/e.total*100),this.ee.emit("loadprogress",t,this.src)}},{key:"fileLoad",value:function(e){var t=this,n=e.target.response||e.target.result;return this.setStateChange(l),new Promise(function(e,i){t.ac.decodeAudioData(n,function(n){t.audioBuffer=n,t.setStateChange(c),e(n)},function(e){i(e)})})}}]),e}();t.default=f},function(e,t,n){var i=n(53);function r(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,e.exports=r,r.prototype.version=i,r.prototype.type="VirtualPatch"},function(e,t,n){"use strict";var i,r,a,o,s,u,l,c=n(143),f=n(129),h=Function.prototype.apply,d=Function.prototype.call,p=Object.create,v=Object.defineProperty,y=Object.defineProperties,m=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};s={on:i=function(e,t){var n;return f(t),m.call(this,"__ee__")?n=this.__ee__:(n=g.value=p(null),v(this,"__ee__",g),g.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},once:r=function(e,t){var n,r;return f(t),r=this,i.call(this,e,n=function(){a.call(r,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},off:a=function(e,t){var n,i,r,a;if(f(t),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[e])return this;if("object"==typeof(i=n[e]))for(a=0;r=i[a];++a)r!==t&&r.__eeOnceListener__!==t||(2===i.length?n[e]=i[a?0:1]:i.splice(a,1));else i!==t&&i.__eeOnceListener__!==t||delete n[e];return this},emit:o=function(e){var t,n,i,r,a;if(m.call(this,"__ee__")&&(r=this.__ee__[e]))if("object"==typeof r){for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];for(r=r.slice(),t=0;i=r[t];++t)h.call(i,this,a)}else switch(arguments.length){case 1:d.call(r,this);break;case 2:d.call(r,this,arguments[1]);break;case 3:d.call(r,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,a=new Array(n-1),t=1;t<n;++t)a[t-1]=arguments[t];h.call(r,this,a)}}},u={on:c(i),once:c(r),off:c(a),emit:c(o)},l=y({},u),e.exports=t=function(e){return null==e?p(l):y(Object(e),u)},t.methods=s},function(e,t,n){var i=n(54),r=n(57),a=n(52),o=n(56);function s(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(i(n)||r(n)||a(n)))throw new Error("thunk did not return a valid node");return n}e.exports=function(e,t){var n=e,i=t;o(t)&&(i=s(t,e));o(e)&&(n=s(e,null));return{a:n,b:i}}},function(e,t,n){"use strict";e.exports=function(e){return"object"==typeof e&&null!==e}},function(e,t,n){var i=n(72),r=n(58);function a(e,t,n,i){if(i){var a=i[t];if(r(a))a.unhook&&a.unhook(e,t,n);else if("attributes"===t)for(var o in a)e.removeAttribute(o);else if("style"===t)for(var s in a)e.style[s]="";else e[t]="string"==typeof a?"":null}}function o(e,t,n,r,a){var o=n?n[r]:void 0;if("attributes"!==r)if(o&&i(o)&&s(o)!==s(a))e[r]=a;else{i(e[r])||(e[r]={});var u="style"===r?"":void 0;for(var l in a){var c=a[l];e[r][l]=void 0===c?u:c}}else for(var f in a){var h=a[f];void 0===h?e.removeAttribute(f):e.setAttribute(f,h)}}function s(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}e.exports=function(e,t,n){for(var s in t){var u=t[s];void 0===u?a(e,s,u,n):r(u)?(a(e,s,u,n),u.hook&&u.hook(e,s,n?n[s]:void 0)):i(u)?o(e,t,n,s,u):e[s]=u}}},function(e,t,n){var i,r="undefined"!=typeof global?global:"undefined"!=typeof window?window:{},a=n(144);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},function(e,t,n){var i=n(74),r=n(73),a=n(54),o=n(57),s=n(52),u=n(71);e.exports=function e(t,n){var l=n&&n.document||i;var c=n?n.warn:null;t=u(t).a;if(s(t))return t.init();if(o(t))return l.createTextNode(t.text);if(!a(t))return c&&c("Item is not a valid virtual dom node",t),null;var f=null===t.namespace?l.createElement(t.tagName):l.createElementNS(t.namespace,t.tagName);var h=t.properties;r(f,h);var d=t.children;for(var p=0;p<d.length;p++){var v=e(d[p],n);v&&f.appendChild(v)}return f}},function(e,t){var n=9007199254740991,i="[object Arguments]",r="[object Function]",a="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/;var s,u,l=Object.prototype,c=l.hasOwnProperty,f=l.toString,h=l.propertyIsEnumerable,d=(s=Object.keys,u=Object,function(e){return s(u(e))}),p=Math.max,v=!h.call({valueOf:1},"valueOf");function y(e,t){var n=w(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&P(e)}(e)&&c.call(e,"callee")&&(!h.call(e,"callee")||f.call(e)==i)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],r=n.length,a=!!r;for(var o in e)!t&&!c.call(e,o)||a&&("length"==o||g(o,r))||n.push(o);return n}function m(e,t,n){var i=e[t];c.call(e,t)&&b(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function g(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}function k(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||l)}function b(e,t){return e===t||e!=e&&t!=t}var w=Array.isArray;function P(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=x(e)?f.call(e):"";return t==r||t==a}(e)}function x(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var T=function(e){return t=function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(r--,a):void 0,o&&function(e,t,n){if(!x(n))return!1;var i=typeof t;return!!("number"==i?P(n)&&g(t,n.length):"string"==i&&t in n)&&b(n[t],e)}(n[0],n[1],o)&&(a=r<3?void 0:a,r=1),t=Object(t);++i<r;){var s=n[i];s&&e(t,s,i,a)}return t},n=p(void 0===n?t.length-1:n,0),function(){for(var e=arguments,i=-1,r=p(e.length-n,0),a=Array(r);++i<r;)a[i]=e[n+i];i=-1;for(var o=Array(n+1);++i<n;)o[i]=e[i];return o[n]=a,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(t,this,o)};var t,n}(function(e,t){if(v||k(t)||P(t))!function(e,t,n,i){n||(n={});for(var r=-1,a=t.length;++r<a;){var o=t[r],s=i?i(n[o],e[o],o,n,e):void 0;m(n,o,void 0===s?e[o]:s)}}(t,function(e){return P(e)?y(e):function(e){if(!k(e))return d(e);var t=[];for(var n in Object(e))c.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}(t),e);else for(var n in t)c.call(t,n)&&m(e,n,t[n])});e.exports=T},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0,t=[],n=[],i=void 0;function r(e,t,n){for(var i=0;i<n.length;i+=1)e.setUint8(t+i,n.charCodeAt(i))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new ArrayBuffer(44+2*e.length),a=new DataView(n);return r(a,0,"RIFF"),a.setUint32(4,32+2*e.length,!0),r(a,8,"WAVE"),r(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,t?1:2,!0),a.setUint32(24,i,!0),a.setUint32(28,4*i,!0),a.setUint16(32,4,!0),a.setUint16(34,16,!0),r(a,36,"data"),a.setUint32(40,2*e.length,!0),function(e,t,n){for(var i=t,r=0;r<n.length;r+=1,i+=2){var a=Math.max(-1,Math.min(1,n[r]));e.setInt16(i,a<0?32768*a:32767*a,!0)}}(a,44,e),a}function o(e,t){for(var n=new Float32Array(t),i=0,r=0;r<e.length;r+=1)n.set(e[r],i),i+=e[r].length;return n}function s(i){var r=a(function(e,t){for(var n=e.length+t.length,i=new Float32Array(n),r=0,a=0;r<n;)i[r+=1]=e[a],i[r+=1]=t[a],a+=1;return i}(o(t,e),o(n,e))),s=new Blob([r],{type:i});postMessage(s)}onmessage=function(r){switch(r.data.command){case"init":o=r.data.config,i=o.sampleRate;break;case"record":a=r.data.buffer,t.push(a[0]),n.push(a[1]),e+=a[0].length;break;case"exportWAV":s(r.data.type);break;case"clear":e=0,t=[],n=[];break;default:throw new Error("Unknown export worker command")}var a,o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){for(var t=1/0,n=-1/0,i=void 0,r=0;r<e.length;r+=1)t>(i=e[r])&&(t=i),n<i&&(n=i);return{min:t,max:n}}function t(e,t){var n=Math.pow(2,t-1),i=e<0?e*n:e*n-1;return Math.max(-n,Math.min(n-1,i))}function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if([8,16,32].indexOf(r)<0)throw new Error("Invalid number of bits specified for peaks.");var a=[],o=n.length;return a.push(function(n,i,r){for(var a=n.length,o=Math.ceil(a/i),s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,h=new self["Int"+r+"Array"](2*o),d=0;d<o;d+=1)s=d*i,u=(d+1)*i>a?a:(d+1)*i,c=t((f=e(n.subarray(s,u))).min,r),l=t(f.max,r),h[2*d]=c,h[2*d+1]=l;return h}(n.subarray(0,o),i,r)),{bits:r,length:a[0].length/2,data:a}}onmessage=function(e){var t=n(e.data.samples,e.data.samplesPerPixel);postMessage(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(e,t){var n=parseInt(e/3600,10)%24,i=parseInt(e/60,10)%60,r=(e%60).toFixed(t);return(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)+":"+(r<10?"0"+r:r)}return{seconds:function(e){return e.toFixed(0)},thousandths:function(e){return e.toFixed(3)},"hh:mm:ss":function(e){return t(e,0)},"hh:mm:ss.u":function(e){return t(e,1)},"hh:mm:ss.uu":function(e){return t(e,2)},"hh:mm:ss.uuu":function(e){return t(e,3)}}[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){};i.prototype.hook=function(e){var t=e.querySelector(".current");if(t){var n=e.getBoundingClientRect(),i=t.getBoundingClientRect().top-n.top;e.scrollTop+=i}},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playlist=t,this.data=i,this.active=!1,this.ondragover=function(e){n.active&&(e.preventDefault(),n.emitDrag(e.clientX))}}return i(e,[{key:"emitDrag",value:function(e){var t=e-this.prevX;if(t){var n=(0,r.pixelsToSeconds)(t,this.playlist.samplesPerPixel,this.playlist.sampleRate);this.prevX=e,this.playlist.ee.emit("dragged",n,this.data)}}},{key:"complete",value:function(){this.active=!1,document.removeEventListener("dragover",this.ondragover)}},{key:"dragstart",value:function(e){var t=e;this.active=!0,this.prevX=e.clientX,t.dataTransfer.dropEffect="move",t.dataTransfer.effectAllowed="move",t.dataTransfer.setData("text/plain",""),document.addEventListener("dragover",this.ondragover)}},{key:"dragend",value:function(e){this.active&&(e.preventDefault(),this.complete())}}],[{key:"getClass",value:function(){return".shift"}},{key:"getEvents",value:function(){return["dragstart","dragend"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{begin:String(e.start.toFixed(3)),end:String(e.end.toFixed(3)),id:String(e.id),language:e.lang,lines:e.lines}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{id:e.id||a.default.v4(),start:Number(e.begin)||0,end:Number(e.end)||0,lines:e.lines||[""],lang:e.language||"en"}};var i,r=n(67),a=(i=r)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=f(n(55)),a=f(n(85)),o=f(n(84)),s=n(51),u=f(n(83)),l=f(n(82)),c=f(n(81));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playlist=t,this.resizeHandlers=[],this.editable=r,this.annotations=n.map(function(e){return(0,a.default)(e)}),this.setupInteractions(),this.controls=i,this.setupEE(t.ee),this.playlist.isContinuousPlay=s,this.playlist.linkEndpoints=o,this.length=this.annotations.length}return i(e,[{key:"setupInteractions",value:function(){var e=this;this.annotations.forEach(function(t,n){var i=new u.default(e.playlist,{direction:"left",index:n}),r=new u.default(e.playlist,{direction:"right",index:n});e.resizeHandlers.push(i),e.resizeHandlers.push(r)})}},{key:"setupEE",value:function(e){var t=this;return e.on("dragged",function(e,n){var i=n.index,r=t.annotations,a=r[i];if("left"===n.direction){var o=a.start;a.start+=e,a.start<0&&(a.start=0),i&&r[i-1].end>a.start&&(r[i-1].end=a.start),t.playlist.linkEndpoints&&i&&r[i-1].end===o&&(r[i-1].end=a.start)}else{var s=a.end;a.end+=e,a.end>t.playlist.duration&&(a.end=t.playlist.duration),i<r.length-1&&r[i+1].start<a.end&&(r[i+1].start=a.end),t.playlist.linkEndpoints&&i<r.length-1&&r[i+1].start===s&&(r[i+1].start=a.end)}t.playlist.drawRequest()}),e.on("continuousplay",function(e){t.playlist.isContinuousPlay=e}),e.on("linkendpoints",function(e){t.playlist.linkEndpoints=e}),e.on("annotationsrequest",function(){t.export()}),e}},{key:"export",value:function(){var e=this.annotations.map(function(e){return(0,o.default)(e)}),t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");document.body.appendChild(n),n.href=t,n.download="annotations.json",n.click(),document.body.removeChild(n)}},{key:"renderResizeLeft",value:function(e){var t=u.default.getEvents(),n={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; left: -2px",draggable:!0}},i=this.resizeHandlers[2*e];return t.forEach(function(e){n["on"+e]=i[e].bind(i)}),(0,r.default)("div.resize-handle.resize-w",n)}},{key:"renderResizeRight",value:function(e){var t=u.default.getEvents(),n={attributes:{style:"position: absolute; height: 30px; width: 10px; top: 0; right: -2px",draggable:!0}},i=this.resizeHandlers[2*e+1];return t.forEach(function(e){n["on"+e]=i[e].bind(i)}),(0,r.default)("div.resize-handle.resize-e",n)}},{key:"renderControls",value:function(e,t){var n=this,i=this;return this.controls.map(function(a){return(0,r.default)("i."+a.class,{attributes:{title:a.title},onclick:function(){a.action(e,t,i.annotations,{linkEndpoints:i.playlist.linkEndpoints}),n.setupInteractions(),i.playlist.drawRequest()}})})}},{key:"render",value:function(){var e=this,t=(0,r.default)("div.annotations-boxes",{attributes:{style:"height: 30px;"}},this.annotations.map(function(t,n){var i=e.playlist.samplesPerPixel,a=e.playlist.sampleRate,o=a/i,u=(0,s.secondsToPixels)(e.playlist.scrollLeft,i,a),l=Math.floor(t.start*o-u),c=Math.ceil(t.end*o-t.start*o);return(0,r.default)("div.annotation-box",{attributes:{style:"position: absolute; height: 30px; width: "+c+"px; left: "+l+"px","data-id":t.id}},[e.renderResizeLeft(n),(0,r.default)("span.id",{onclick:function(){e.playlist.isContinuousPlay?e.playlist.ee.emit("play",e.annotations[n].start):e.playlist.ee.emit("play",e.annotations[n].start,e.annotations[n].end)}},[t.id]),e.renderResizeRight(n)])})),n=(0,r.default)("div.annotations-boxes-wrapper",{attributes:{style:"overflow: hidden;"}},[t]),i=(0,r.default)("div.annotations-text",{hook:new l.default},this.annotations.map(function(t,n){var i=(0,c.default)(e.playlist.durationFormat),a=i(t.start),o=i(t.end),s="";e.playlist.isPlaying()&&e.playlist.playbackSeconds>=t.start&&e.playlist.playbackSeconds<=t.end&&(s=".current");var u={attributes:{contenteditable:!0},oninput:function(e){t.lines=[e.target.innerText]},onkeypress:function(e){13!==e.which&&13!==e.keyCode||(e.target.blur(),e.preventDefault())}},l=e.editable?u:{};return(0,r.default)("div.annotation"+s,[(0,r.default)("span.annotation-id",[t.id]),(0,r.default)("span.annotation-start",[a]),(0,r.default)("span.annotation-end",[o]),(0,r.default)("span.annotation-lines",l,[t.lines]),(0,r.default)("span.annotation-actions",e.renderControls(t,n))])}));return(0,r.default)("div.annotations",[n,i])}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(61);var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ac=t,this.gain=1,this.buffer=n,this.destination=this.ac.destination}return i(e,[{key:"applyFade",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"logarithmic";if(e===r.FADEIN)(0,r.createFadeIn)(this.fadeGain.gain,i,t,n);else{if(e!==r.FADEOUT)throw new Error("Unsupported fade type");(0,r.createFadeOut)(this.fadeGain.gain,i,t,n)}}},{key:"applyFadeIn",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(r.FADEIN,e,t,n)}},{key:"applyFadeOut",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"logarithmic";this.applyFade(r.FADEOUT,e,t,n)}},{key:"isPlaying",value:function(){return void 0!==this.source}},{key:"getDuration",value:function(){return this.buffer.duration}},{key:"setAudioContext",value:function(e){this.ac=e,this.destination=this.ac.destination}},{key:"setUpSource",value:function(){var e=this;this.source=this.ac.createBufferSource(),this.source.buffer=this.buffer;var t=new Promise(function(t){e.source.onended=function(){e.source.disconnect(),e.fadeGain.disconnect(),e.volumeGain.disconnect(),e.shouldPlayGain.disconnect(),e.masterGain.disconnect(),e.source=void 0,e.fadeGain=void 0,e.volumeGain=void 0,e.shouldPlayGain=void 0,e.masterGain=void 0,t()}});return this.fadeGain=this.ac.createGain(),this.volumeGain=this.ac.createGain(),this.shouldPlayGain=this.ac.createGain(),this.masterGain=this.ac.createGain(),this.source.connect(this.fadeGain),this.fadeGain.connect(this.volumeGain),this.volumeGain.connect(this.shouldPlayGain),this.shouldPlayGain.connect(this.masterGain),this.masterGain.connect(this.destination),t}},{key:"setVolumeGainLevel",value:function(e){this.volumeGain&&(this.volumeGain.gain.value=e)}},{key:"setShouldPlay",value:function(e){this.shouldPlayGain&&(this.shouldPlayGain.gain.value=e?1:0)}},{key:"setMasterGainLevel",value:function(e){this.masterGain&&(this.masterGain.gain.value=e)}},{key:"play",value:function(e,t,n){this.source.start(e,t,n)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.source&&this.source.stop(e)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gain=t}return i(e,[{key:"hook",value:function(e){e.setAttribute("value",100*this.gain)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(61),a=n(64);var o=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.shape=n,this.duration=i,this.samplesPerPixel=r}return i(e,[{key:"hook",value:function(t,n,i){if(void 0===i||i.shape!==this.shape||i.type!==this.type||i.duration!==this.duration||i.samplesPerPixel!==this.samplesPerPixel){var r=t.getContext("2d"),a=t.width,o=t.height,s=e.createCurve(this.shape,this.type,a),u=s.length,l=o-s[0]*o;r.strokeStyle="black",r.beginPath(),r.moveTo(0,l);for(var c=1;c<u;c+=1)l=o-s[c]*o,r.lineTo(c,l);r.stroke()}}}],[{key:"createCurve",value:function(e,t,n){var i=void 0,o=void 0;switch(t){case r.FADEIN:i=1;break;case r.FADEOUT:i=-1;break;default:throw new Error("Unsupported fade type.")}switch(e){case r.SCURVE:o=(0,a.sCurve)(n,i);break;case r.LINEAR:o=(0,a.linear)(n,i);break;case r.EXPONENTIAL:o=(0,a.exponential)(n,i);break;case r.LOGARITHMIC:o=(0,a.logarithmic)(n,10,i);break;default:throw new Error("Unsupported fade shape")}return o}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.peaks=t,this.offset=n,this.color=r,this.bits=i}return i(e,[{key:"hook",value:function(t,n,i){if(void 0===i||i.peaks!==this.peaks){var r=t.width,a=t.getContext("2d"),o=t.height/2,s=Math.pow(2,this.bits-1);a.clearRect(0,0,t.width,t.height),a.fillStyle=this.color;for(var u=0;u<r;u+=1){var l=this.peaks[2*(u+this.offset)]/s,c=this.peaks[2*(u+this.offset)+1]/s;e.drawFrame(a,o,u,l,c)}}}}],[{key:"drawFrame",value:function(e,t,n,i,r){var a=Math.abs(i*t),o=Math.abs(r*t);e.fillRect(n,0,1,t-o),e.fillRect(n,t+a,1,t-a)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t}return i(e,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){var t=e.offsetX,n=(0,r.pixelsToSeconds)(t,this.samplesPerPixel,this.sampleRate);n>this.track.getStartTime()&&n<this.track.getEndTime()&&this.track.ee.emit("fadeout",this.track.getEndTime()-n,this.track)}}],[{key:"getClass",value:function(){return".state-fadeout"}},{key:"getEvents",value:function(){return["click"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t}return i(e,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){var t=e.offsetX,n=(0,r.pixelsToSeconds)(t,this.samplesPerPixel,this.sampleRate);n>this.track.getStartTime()&&n<this.track.getEndTime()&&this.track.ee.emit("fadein",n-this.track.getStartTime(),this.track)}}],[{key:"getClass",value:function(){return".state-fadein"}},{key:"getEvents",value:function(){return["click"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t,this.active=!1}return i(e,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"emitShift",value:function(e){var t=e-this.prevX,n=(0,r.pixelsToSeconds)(t,this.samplesPerPixel,this.sampleRate);this.prevX=e,this.track.ee.emit("shift",n,this.track)}},{key:"complete",value:function(e){this.emitShift(e),this.active=!1}},{key:"mousedown",value:function(e){e.preventDefault(),this.active=!0,this.el=e.target,this.prevX=e.offsetX}},{key:"mousemove",value:function(e){this.active&&(e.preventDefault(),this.emitShift(e.offsetX))}},{key:"mouseup",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}},{key:"mouseleave",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}}],[{key:"getClass",value:function(){return".state-shift"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t,this.active=!1}return i(e,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"emitSelection",value:function(e){var t=Math.min(e,this.startX),n=Math.max(e,this.startX),i=(0,r.pixelsToSeconds)(t,this.samplesPerPixel,this.sampleRate),a=(0,r.pixelsToSeconds)(n,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",i,a,this.track)}},{key:"complete",value:function(e){this.emitSelection(e),this.active=!1}},{key:"mousedown",value:function(e){e.preventDefault(),this.active=!0,this.startX=e.offsetX;var t=(0,r.pixelsToSeconds)(this.startX,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",t,t,this.track)}},{key:"mousemove",value:function(e){this.active&&(e.preventDefault(),this.emitSelection(e.offsetX))}},{key:"mouseup",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}},{key:"mouseleave",value:function(e){this.active&&(e.preventDefault(),this.complete(e.offsetX))}}],[{key:"getClass",value:function(){return".state-select"}},{key:"getEvents",value:function(){return["mousedown","mousemove","mouseup","mouseleave"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.track=t}return i(e,[{key:"setup",value:function(e,t){this.samplesPerPixel=e,this.sampleRate=t}},{key:"click",value:function(e){e.preventDefault();var t=e.offsetX,n=(0,r.pixelsToSeconds)(t,this.samplesPerPixel,this.sampleRate);this.track.ee.emit("select",n,n,this.track)}}],[{key:"getClass",value:function(){return".state-cursor"}},{key:"getEvents",value:function(){return["click"]}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=u(n(95)),r=u(n(94)),a=u(n(93)),o=u(n(92)),s=u(n(91));function u(e){return e&&e.__esModule?e:{default:e}}t.default={cursor:i.default,select:r.default,shift:a.default,fadein:o.default,fadeout:s.default}},function(module,exports,__webpack_require__){"use strict";function findMinMax(e){for(var t,n=1/0,i=-1/0,r=0,a=e.length;r<a;r++)n>(t=e[r])&&(n=t),i<t&&(i=t);return{min:n,max:i}}function convert(e,t){var n=Math.pow(2,t-1),i=e<0?e*n:e*n-1;return Math.max(-n,Math.min(n-1,i))}function extractPeaks(channel,samplesPerPixel,bits){var i,chanLength=channel.length,numPeaks=Math.ceil(chanLength/samplesPerPixel),start,end,segment,max,min,extrema,peaks=new(eval("Int"+bits+"Array"))(2*numPeaks);for(i=0;i<numPeaks;i++)start=i*samplesPerPixel,end=(i+1)*samplesPerPixel>chanLength?chanLength:(i+1)*samplesPerPixel,segment=channel.subarray(start,end),extrema=findMinMax(segment),min=convert(extrema.min,bits),max=convert(extrema.max,bits),peaks[2*i]=min,peaks[2*i+1]=max;return peaks}function makeMono(channelPeaks,bits){var numChan=channelPeaks.length,weight=1/numChan,numPeaks=channelPeaks[0].length/2,c=0,i=0,min,max,peaks=new(eval("Int"+bits+"Array"))(2*numPeaks);for(i=0;i<numPeaks;i++){for(min=0,max=0,c=0;c<numChan;c++)min+=weight*channelPeaks[c][2*i],max+=weight*channelPeaks[c][2*i+1];peaks[2*i]=min,peaks[2*i+1]=max}return[peaks]}module.exports=function(e,t,n,i,r,a){if(t=t||1e4,a=a||8,null!==n&&void 0!==n||(n=!0),[8,16,32].indexOf(a)<0)throw new Error("Invalid number of bits specified for peaks.");var o,s,u,l=e.numberOfChannels,c=[];if(void 0===e.subarray)for(o=0;o<l;o++)s=e.getChannelData(o),i=i||0,r=r||s.length,u=s.subarray(i,r),c.push(extractPeaks(u,t,a));else i=i||0,r=r||e.length,c.push(extractPeaks(e.subarray(i,r),t,a));return n&&c.length>1&&(c=makeMono(c,a)),{length:c[0].length/2,data:c,bits:a}}},function(e,t,n){var i=n(66),r=n(65);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},function(e,t,n){var i,r,a=n(66),o=n(65),s=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],f=(e=e||{}).node||i,h=void 0!==e.clockseq?e.clockseq:r;if(null==f||null==h){var d=a();null==f&&(f=i=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=r=16383&(d[6]<<8|d[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),v=void 0!==e.nsecs?e.nsecs:u+1,y=p-s+(v-u)/1e4;if(y<0&&void 0===e.clockseq&&(h=h+1&16383),(y<0||p>s)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=v,r=h;var m=(1e4*(268435455&(p+=122192928e5))+v)%4294967296;c[l++]=m>>>24&255,c[l++]=m>>>16&255,c[l++]=m>>>8&255,c[l++]=255&m;var g=p/4294967296*1e4&268435455;c[l++]=g>>>8&255,c[l++]=255&g,c[l++]=g>>>24&15|16,c[l++]=g>>>16&255,c[l++]=h>>>8|128,c[l++]=255&h;for(var k=0;k<6;++k)c[l+k]=f[k];return t||o(c)}},function(e,t){var n=9007199254740991,i="[object Arguments]",r="[object Function]",a="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/;var s,u,l=Object.prototype,c=l.hasOwnProperty,f=l.toString,h=l.propertyIsEnumerable,d=(s=Object.keys,u=Object,function(e){return s(u(e))});function p(e,t){var n=k(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&b(e)}(e)&&c.call(e,"callee")&&(!h.call(e,"callee")||f.call(e)==i)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],r=n.length,a=!!r;for(var o in e)!t&&!c.call(e,o)||a&&("length"==o||g(o,r))||n.push(o);return n}var v,y=function(e,t,n){for(var i=-1,r=Object(e),a=n(e),o=a.length;o--;){var s=a[v?o:++i];if(!1===t(r[s],s,r))break}return e};function m(e){if(n=(t=e)&&t.constructor,i="function"==typeof n&&n.prototype||l,t!==i)return d(e);var t,n,i,r=[];for(var a in Object(e))c.call(e,a)&&"constructor"!=a&&r.push(a);return r}function g(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var k=Array.isArray;function b(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?f.call(e):"";return t==r||t==a}(e)}function w(e){return b(e)?p(e):m(e)}function P(e){return e}e.exports=function(e,t){return e&&function(e,t){return e&&y(e,t,w)}(e,"function"==typeof t?t:P)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=v(n(76)),a=v(n(100)),o=v(n(67)),s=v(n(55)),u=v(n(97)),l=n(61),c=n(51),f=v(n(96)),h=v(n(90)),d=v(n(89)),p=v(n(88));function v(e){return e&&e.__esModule?e:{default:e}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name="Untitled",this.customClass=void 0,this.waveOutlineColor=void 0,this.gain=1,this.fades={},this.peakData={type:"WebAudio",mono:!1},this.cueIn=0,this.cueOut=0,this.duration=0,this.startTime=0,this.endTime=0}return i(e,[{key:"setEventEmitter",value:function(e){this.ee=e}},{key:"setName",value:function(e){this.name=e}},{key:"setCustomClass",value:function(e){this.customClass=e}},{key:"setWaveOutlineColor",value:function(e){this.waveOutlineColor=e}},{key:"setCues",value:function(e,t){if(t<e)throw new Error("cue out cannot be less than cue in");this.cueIn=e,this.cueOut=t,this.duration=this.cueOut-this.cueIn,this.endTime=this.startTime+this.duration}},{key:"trim",value:function(e,t){var n=this.getStartTime(),i=this.getEndTime(),r=this.cueIn-n;if(n<=e&&i>=e||n<=t&&i>=t){var a=e<n?n:e,o=t>i?i:t;this.setCues(a+r,o+r),e>n&&this.setStartTime(e)}}},{key:"setStartTime",value:function(e){this.startTime=e,this.endTime=e+this.duration}},{key:"setPlayout",value:function(e){this.playout=e}},{key:"setOfflinePlayout",value:function(e){this.offlinePlayout=e}},{key:"setEnabledStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.enabledStates=(0,r.default)({},{cursor:!0,fadein:!0,fadeout:!0,select:!0,shift:!0},e)}},{key:"setFadeIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(e>this.duration)throw new Error("Invalid Fade In");var n={shape:t,start:0,end:e};this.fadeIn&&(this.removeFade(this.fadeIn),this.fadeIn=void 0),this.fadeIn=this.saveFade(l.FADEIN,n.shape,n.start,n.end)}},{key:"setFadeOut",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logarithmic";if(e>this.duration)throw new Error("Invalid Fade Out");var n={shape:t,start:this.duration-e,end:this.duration};this.fadeOut&&(this.removeFade(this.fadeOut),this.fadeOut=void 0),this.fadeOut=this.saveFade(l.FADEOUT,n.shape,n.start,n.end)}},{key:"saveFade",value:function(e,t,n,i){var r=o.default.v4();return this.fades[r]={type:e,shape:t,start:n,end:i},r}},{key:"removeFade",value:function(e){delete this.fades[e]}},{key:"setBuffer",value:function(e){this.buffer=e}},{key:"setPeakData",value:function(e){this.peakData=e}},{key:"calculatePeaks",value:function(e,t){var n=(0,c.secondsToSamples)(this.cueIn,t),i=(0,c.secondsToSamples)(this.cueOut,t);this.setPeaks((0,u.default)(this.buffer,e,this.peakData.mono,n,i))}},{key:"setPeaks",value:function(e){this.peaks=e}},{key:"setState",value:function(e){if(this.state=e,this.state&&this.enabledStates[this.state]){var t=f.default[this.state];this.stateObj=new t(this)}else this.stateObj=void 0}},{key:"getStartTime",value:function(){return this.startTime}},{key:"getEndTime",value:function(){return this.endTime}},{key:"getDuration",value:function(){return this.duration}},{key:"isPlaying",value:function(){return this.playout.isPlaying()}},{key:"setShouldPlay",value:function(e){this.playout.setShouldPlay(e)}},{key:"setGainLevel",value:function(e){this.gain=e,this.playout.setVolumeGainLevel(e)}},{key:"setMasterGainLevel",value:function(e){this.playout.setMasterGainLevel(e)}},{key:"schedulePlay",value:function(e,t,n,i){var o=void 0,s=void 0,u=e,c=n?n-t:void 0,f=(0,r.default)({},{shouldPlay:!0,masterGain:1,isOffline:!1},i),h=f.isOffline?this.offlinePlayout:this.playout;if(this.endTime<=t||c&&t+c<this.startTime)return Promise.resolve();this.startTime>=t?(o=0,u+=this.startTime-t,n?(c-=this.startTime-t,s=Math.min(c,this.duration)):s=this.duration):(o=t-this.startTime,s=n?Math.min(c,this.duration-o):this.duration-o),o+=this.cueIn;var d=t-this.startTime,p=h.setUpSource();return(0,a.default)(this.fades,function(t){var n=void 0,i=void 0;if(d<t.end)switch(d<=t.start?(n=e+(t.start-d),i=t.end-t.start):d>t.start&&d<t.end&&(n=e-(d-t.start),i=t.end-t.start),t.type){case l.FADEIN:h.applyFadeIn(n,i,t.shape);break;case l.FADEOUT:h.applyFadeOut(n,i,t.shape);break;default:throw new Error("Invalid fade type saved on track.")}}),h.setVolumeGainLevel(this.gain),h.setShouldPlay(f.shouldPlay),h.setMasterGainLevel(f.masterGain),h.play(u,o,s),p}},{key:"scheduleStop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.playout.stop(e)}},{key:"renderOverlay",value:function(e){var t=this,n={attributes:{style:"position: absolute; top: 0; right: 0; bottom: 0; left: 0; width: "+(0,c.secondsToPixels)(e.playlistLength,e.resolution,e.sampleRate)+"px; z-index: 9;"}},i="";if(this.stateObj){this.stateObj.setup(e.resolution,e.sampleRate);var r=f.default[this.state];r.getEvents().forEach(function(e){n["on"+e]=t.stateObj[e].bind(t.stateObj)}),i=r.getClass()}return(0,s.default)("div.playlist-overlay"+i,n)}},{key:"renderControls",value:function(e){var t=this,n=e.muted?".active":"",i=e.soloed?".active":"",r=this.peaks.data.length;return(0,s.default)("div.controls",{attributes:{style:"height: "+r*e.height+"px; width: "+e.controls.width+"px; position: absolute; left: 0; z-index: 10;"}},[(0,s.default)("header",[this.name]),(0,s.default)("div.btn-group",[(0,s.default)("span.btn.btn-default.btn-xs.btn-mute"+n,{onclick:function(){t.ee.emit("mute",t)}},["Mute"]),(0,s.default)("span.btn.btn-default.btn-xs.btn-solo"+i,{onclick:function(){t.ee.emit("solo",t)}},["Solo"])]),(0,s.default)("label",[(0,s.default)("input.volume-slider",{attributes:{type:"range",min:0,max:100,value:100},hook:new p.default(this.gain),oninput:function(e){t.ee.emit("volumechange",e.target.value,t)}})])])}},{key:"render",value:function(e){var t=this,n=this.peaks.length,i=(0,c.secondsToPixels)(e.playbackSeconds,e.resolution,e.sampleRate),r=(0,c.secondsToPixels)(this.startTime,e.resolution,e.sampleRate),a=(0,c.secondsToPixels)(this.endTime,e.resolution,e.sampleRate),o=0,u=this.peaks.data.length;i>0&&i>r&&(o=i<a?i-r:n);var l=[(0,s.default)("div.cursor",{attributes:{style:"position: absolute; width: 1px; margin: 0; padding: 0; top: 0; left: "+i+"px; bottom: 0; z-index: 5;"}})],f=Object.keys(this.peaks.data).map(function(i){for(var a=[(0,s.default)("div.channel-progress",{attributes:{style:"position: absolute; width: "+o+"px; height: "+e.height+"px; z-index: 2;"}})],u=0,l=n,f=t.peaks.data[i];l>0;){var p=Math.min(l,1e3),v=t.waveOutlineColor?t.waveOutlineColor:e.colors.waveOutlineColor;a.push((0,s.default)("canvas",{attributes:{width:p,height:e.height,style:"float: left; position: relative; margin: 0; padding: 0; z-index: 3;"},hook:new h.default(f,u,t.peaks.bits,v)})),l-=p,u+=1e3}if(t.fadeIn){var y=t.fades[t.fadeIn],m=(0,c.secondsToPixels)(y.end-y.start,e.resolution,e.sampleRate);a.push((0,s.default)("div.wp-fade.wp-fadein",{attributes:{style:"position: absolute; height: "+e.height+"px; width: "+m+"px; top: 0; left: 0; z-index: 4;"}},[(0,s.default)("canvas",{attributes:{width:m,height:e.height},hook:new d.default(y.type,y.shape,y.end-y.start,e.resolution)})]))}if(t.fadeOut){var g=t.fades[t.fadeOut],k=(0,c.secondsToPixels)(g.end-g.start,e.resolution,e.sampleRate);a.push((0,s.default)("div.wp-fade.wp-fadeout",{attributes:{style:"position: absolute; height: "+e.height+"px; width: "+k+"px; top: 0; right: 0; z-index: 4;"}},[(0,s.default)("canvas",{attributes:{width:k,height:e.height},hook:new d.default(g.type,g.shape,g.end-g.start,e.resolution)})]))}return(0,s.default)("div.channel.channel-"+i,{attributes:{style:"height: "+e.height+"px; width: "+n+"px; top: "+i*e.height+"px; left: "+r+"px; position: absolute; margin: 0; padding: 0; z-index: 1;"}},a)});if(l.push(f),l.push(this.renderOverlay(e)),!0===e.isActive){var p=(0,c.secondsToPixels)(e.timeSelection.start,e.resolution,e.sampleRate),v=(0,c.secondsToPixels)(e.timeSelection.end,e.resolution,e.sampleRate)-p+1,y=v>1?".segment":".point";l.push((0,s.default)("div.selection"+y,{attributes:{style:"position: absolute; width: "+v+"px; bottom: 0; top: 0; left: "+p+"px; z-index: 4;"}}))}var m=(0,s.default)("div.waveform",{attributes:{style:"height: "+u*e.height+"px; position: relative;"}},l),g=[],k=0;e.controls.show&&(g.push(this.renderControls(e)),k=e.controls.width),g.push(m);var b=e.shouldPlay?"":".silent",w=void 0===this.customClass?"":"."+this.customClass;return(0,s.default)("div.channel-wrapper"+b+w,{attributes:{style:"margin-left: "+k+"px; height: "+e.height*u+"px;"}},g)}},{key:"getTrackDetails",value:function(){var e={src:this.src,start:this.startTime,end:this.endTime,name:this.name,customClass:this.customClass,cuein:this.cueIn,cueout:this.cueOut};if(this.fadeIn){var t=this.fades[this.fadeIn];e.fadeIn={shape:t.shape,duration:t.end-t.start}}if(this.fadeOut){var n=this.fades[this.fadeOut];e.fadeOut={shape:n.shape,duration:n.end-n.start}}return e}}]),e}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tickInfo=t,this.offset=n,this.samplesPerPixel=i,this.duration=r}return i(e,[{key:"hook",value:function(e,t,n){var i=this;if(void 0===n||n.offset!==this.offset||n.duration!==this.duration||n.samplesPerPixel!==this.samplesPerPixel){var r=e.width,a=e.height,o=e.getContext("2d");o.clearRect(0,0,r,a),Object.keys(this.tickInfo).forEach(function(e){var t=i.tickInfo[e],n=a-t;o.fillRect(e,n,1,t)})}}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(55)),a=n(51),o=s(n(102));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=t,this.offset=n,this.samplesPerPixel=i,this.sampleRate=r,this.marginLeft=a,this.timeinfo={20000:{marker:3e4,bigStep:1e4,smallStep:5e3,secondStep:5},12000:{marker:15e3,bigStep:5e3,smallStep:1e3,secondStep:1},10000:{marker:1e4,bigStep:5e3,smallStep:1e3,secondStep:1},5000:{marker:5e3,bigStep:1e3,smallStep:500,secondStep:.5},2500:{marker:2e3,bigStep:1e3,smallStep:500,secondStep:.5},1500:{marker:2e3,bigStep:1e3,smallStep:200,secondStep:.2},700:{marker:1e3,bigStep:500,smallStep:100,secondStep:.1}}}return i(e,[{key:"getScaleInfo",value:function(e){var t=Object.keys(this.timeinfo).map(function(e){return parseInt(e,10)});t=t.sort(function(e,t){return e-t});for(var n=0;n<t.length;n+=1)if(e<=t[n])return this.timeinfo[t[n]];return this.timeinfo[t[0]]}},{key:"render",value:function(){for(var t=(0,a.secondsToPixels)(this.duration,this.samplesPerPixel,this.sampleRate),n=this.sampleRate/this.samplesPerPixel,i=(0,a.secondsToPixels)(this.offset,this.samplesPerPixel,this.sampleRate),s=this.getScaleInfo(this.samplesPerPixel),u={},l=[],c=t+i,f=0,h=0;h<c;h+=n*s.secondStep){var d=Math.floor(h),p=d-i;d>=i&&(s.marker&&f%s.marker==0?(l.push((0,r.default)("div.time",{attributes:{style:"position: absolute; left: "+p+"px;"}},[e.formatTime(f)])),u[p]=10):s.bigStep&&f%s.bigStep==0?u[p]=5:s.smallStep&&f%s.smallStep==0&&(u[p]=2)),f+=1e3*s.secondStep}return(0,r.default)("div.playlist-time-scale",{attributes:{style:"position: relative; left: 0; right: 0; margin-left: "+this.marginLeft+"px;"}},[l,(0,r.default)("canvas",{attributes:{width:t,height:30,style:"position: absolute; left: 0; right: 0; top: 0; bottom: 0;"},hook:new o.default(u,this.offset,this.samplesPerPixel,this.duration)})])}}],[{key:"formatTime",value:function(e){var t=e/1e3,n=t%60,i=(t-n)/60;return n<10&&(n="0"+n),i+":"+n}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(51);var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.playlist=t}return i(e,[{key:"hook",value:function(e){var t=this.playlist;if(!t.isScrolling){var n=e;if(t.isAutomaticScroll){var i=e.getBoundingClientRect(),a=e.querySelector(".cursor").getBoundingClientRect();(a.right>i.right||a.right<0)&&(t.scrollLeft=t.playbackSeconds)}var o=(0,r.secondsToPixels)(t.scrollLeft,t.samplesPerPixel,t.sampleRate);n.scrollLeft=o}}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},o=n(68),s=(i=o)&&i.__esModule?i:{default:i};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),r(t,[{key:"load",value:function(){var e=this;return new Promise(function(n,i){var r=new XMLHttpRequest;r.open("GET",e.src,!0),r.responseType="arraybuffer",r.send(),r.addEventListener("progress",function(n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fileProgress",e).call(e,n)}),r.addEventListener("load",function(i){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fileLoad",e).call(e,i).then(function(e){n(e)})}),r.addEventListener("error",function(){i(Error("Track "+e.src+" failed to load"))})})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},o=n(68),s=(i=o)&&i.__esModule?i:{default:i};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),r(t,[{key:"load",value:function(){var e=this;return new Promise(function(n,i){if(e.src.type.match(/audio.*/)||e.src.type.match(/video\/ogg/)){var r=new FileReader;r.readAsArrayBuffer(e.src),r.addEventListener("progress",function(n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fileProgress",e).call(e,n)}),r.addEventListener("load",function(i){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fileLoad",e).call(e,i).then(function(e){n(e)})}),r.addEventListener("error",function(e){i(e)})}else i(Error("Unsupported file type "+e.src.type))})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=o(n(106)),a=o(n(105));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"createLoader",value:function(e,t,n){if(e instanceof Blob)return new r.default(e,t,n);if("string"==typeof e)return new a.default(e,t,n);throw new Error("Unsupported src type")}}]),e}();t.default=s},function(e,t){var n=!!(global===global.window&&global.URL&&global.Blob&&global.Worker);function i(e,t){var i,r=this;if(t=t||{},n)return i=e.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],new global.Worker(global.URL.createObjectURL(new global.Blob([i],{type:"text/javascript"})));this.self=t,this.self.postMessage=function(e){setTimeout(function(){r.onmessage({data:e})},0)},setTimeout(e.bind(t,t),0)}i.prototype.postMessage=function(e){var t=this;setTimeout(function(){t.self.onmessage({data:e})},0)},e.exports=i},function(e,t,n){var i=n(52);e.exports=function(e,t){if(i(e)&&i(t))return"name"in e&&"name"in t?e.id===t.id:e.init===t.init;return!1}},function(e,t,n){var i=n(73),r=n(52),a=n(69),o=n(109);function s(e,t){"function"==typeof t.destroy&&r(t)&&t.destroy(e)}e.exports=function(e,t,n){var r=e.type,u=e.vNode,l=e.patch;switch(r){case a.REMOVE:return function(e,t){var n=e.parentNode;n&&n.removeChild(e);return s(e,t),null}(t,u);case a.INSERT:return function(e,t,n){var i=n.render(t,n);e&&e.appendChild(i);return e}(t,l,n);case a.VTEXT:return function(e,t,n,i){var r;if(3===e.nodeType)e.replaceData(0,e.length,n.text),r=e;else{var a=e.parentNode;r=i.render(n,i),a&&r!==e&&a.replaceChild(r,e)}return r}(t,0,l,n);case a.WIDGET:return function(e,t,n,i){var r,a=o(t,n);r=a?n.update(t,e)||e:i.render(n,i);var u=e.parentNode;u&&r!==e&&u.replaceChild(r,e);a||s(e,t);return r}(t,u,l,n);case a.VNODE:return function(e,t,n,i){var r=e.parentNode,a=i.render(n,i);r&&a!==e&&r.replaceChild(a,e);return a}(t,0,l,n);case a.ORDER:return function(e,t){for(var n,i,r,a=e.childNodes,o={},s=0;s<t.removes.length;s++)i=t.removes[s],n=a[i.from],i.key&&(o[i.key]=n),e.removeChild(n);for(var u=a.length,l=0;l<t.inserts.length;l++)r=t.inserts[l],n=o[r.key],e.insertBefore(n,r.to>=u++?null:a[r.to])}(t,l),t;case a.PROPS:return i(t,l,u.properties),t;case a.THUNK:return function(e,t){e&&t&&e!==t&&e.parentNode&&e.parentNode.replaceChild(t,e);return t}(t,n.patch(t,l,n));default:return t}}},function(e,t){var n={};function i(e,t,n){if(0===e.length)return!1;for(var i,r,a=0,o=e.length-1;a<=o;){if(r=e[i=(o+a)/2>>0],a===o)return r>=t&&r<=n;if(r<t)a=i+1;else{if(!(r>n))return!0;o=i-1}}return!1}function r(e,t){return e>t?1:-1}e.exports=function(e,t,a,o){return a&&0!==a.length?(a.sort(r),function e(t,r,a,o,s){o=o||{};if(t){i(a,s,s)&&(o[s]=t);var u=r.children;if(u)for(var l=t.childNodes,c=0;c<r.children.length;c++){s+=1;var f=u[c]||n,h=s+(f.count||0);i(a,s,h)&&e(l[c],f,a,o,s),s=h}}return o}(e,t,a,o,0)):{}}},function(e,t,n){var i=n(74),r=n(62),a=n(75),o=n(111),s=n(110);function u(e,t,n){var r=function(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}(t);if(0===r.length)return e;var a=o(e,t.a,r),s=e.ownerDocument;n.document||s===i||(n.document=s);for(var u=0;u<r.length;u++){var c=r[u];e=l(e,a[c],t[c],n)}return e}function l(e,t,n,i){if(!t)return e;var a;if(r(n))for(var o=0;o<n.length;o++)a=s(n[o],t,i),t===e&&(e=a);else a=s(n,t,i),t===e&&(e=a);return e}e.exports=function e(t,n,i){i=i||{};i.patch=i.patch&&i.patch!==e?i.patch:u;i.render=i.render||a;return i.patch(t,n,i)}},function(e,t,n){var i=n(112);e.exports=i},function(e,t,n){var i=n(72),r=n(58);function a(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}e.exports=function e(t,n){var o;for(var s in t){s in n||((o=o||{})[s]=void 0);var u=t[s],l=n[s];if(u!==l)if(i(u)&&i(l))if(a(l)!==a(u))(o=o||{})[s]=l;else if(r(l))(o=o||{})[s]=l;else{var c=e(u,l);c&&((o=o||{})[s]=c)}else(o=o||{})[s]=l}for(var f in n)f in t||((o=o||{})[f]=n[f]);return o}},function(e,t,n){var i=n(62),r=n(69),a=n(54),o=n(57),s=n(52),u=n(56),l=n(71),c=n(114);function f(e,t){var n={a:e};return h(e,t,n,0),n}function h(e,t,n,i){if(e!==t){var l=n[i],f=!1;if(u(e)||u(t))p(e,t,n,i);else if(null==t)s(e)||(d(e,n,i),l=n[i]),l=m(l,new r(r.REMOVE,e,t));else if(a(t))if(a(e))if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var g=c(e.properties,t.properties);g&&(l=m(l,new r(r.PROPS,e,g))),l=function(e,t,n,i,o){for(var s=e.children,u=function(e,t){var n=y(t),i=n.keys,r=n.free;if(r.length===t.length)return{children:t,moves:null};var a=y(e),o=a.keys;if(a.free.length===e.length)return{children:t,moves:null};for(var s=[],u=0,l=r.length,c=0,f=0;f<e.length;f++){var h,d=e[f];d.key?i.hasOwnProperty(d.key)?(h=i[d.key],s.push(t[h])):(h=f-c++,s.push(null)):u<l?(h=r[u++],s.push(t[h])):(h=f-c++,s.push(null))}for(var p=u>=r.length?t.length:r[u],m=0;m<t.length;m++){var g=t[m];g.key?o.hasOwnProperty(g.key)||s.push(g):m>=p&&s.push(g)}for(var k,b=s.slice(),w=0,P=[],x=[],T=0;T<t.length;){var O=t[T];for(k=b[w];null===k&&b.length;)P.push(v(b,w,null)),k=b[w];k&&k.key===O.key?(w++,T++):O.key?(k&&k.key&&i[k.key]!==T+1?(P.push(v(b,w,k.key)),(k=b[w])&&k.key===O.key?w++:x.push({key:O.key,to:T})):x.push({key:O.key,to:T}),T++):k&&k.key&&P.push(v(b,w,k.key))}for(;w<b.length;)k=b[w],P.push(v(b,w,k&&k.key));if(P.length===c&&!x.length)return{children:s,moves:null};return{children:s,moves:{removes:P,inserts:x}}}(s,t.children),l=u.children,c=s.length,f=l.length,d=c>f?c:f,p=0;p<d;p++){var g=s[p],k=l[p];o+=1,g?h(g,k,n,o):k&&(i=m(i,new r(r.INSERT,null,k))),a(g)&&g.count&&(o+=g.count)}u.moves&&(i=m(i,new r(r.ORDER,e,u.moves)));return i}(e,t,n,l,i)}else l=m(l,new r(r.VNODE,e,t)),f=!0;else l=m(l,new r(r.VNODE,e,t)),f=!0;else o(t)?o(e)?e.text!==t.text&&(l=m(l,new r(r.VTEXT,e,t))):(l=m(l,new r(r.VTEXT,e,t)),f=!0):s(t)&&(s(e)||(f=!0),l=m(l,new r(r.WIDGET,e,t)));l&&(n[i]=l),f&&d(e,n,i)}}function d(e,t,n){!function e(t,n,i){if(a(t)){if(t.hooks&&(n[i]=m(n[i],new r(r.PROPS,t,function(e){var t={};for(var n in e)t[n]=void 0;return t}(t.hooks)))),t.descendantHooks||t.hasThunks)for(var o=t.children,s=o.length,l=0;l<s;l++){var c=o[l];e(c,n,i+=1),a(c)&&c.count&&(i+=c.count)}}else u(t)&&p(t,null,n,i)}(e,t,n),function e(t,n,i){if(s(t))"function"==typeof t.destroy&&(n[i]=m(n[i],new r(r.REMOVE,t,null)));else if(a(t)&&(t.hasWidgets||t.hasThunks))for(var o=t.children,l=o.length,c=0;c<l;c++){var f=o[c];e(f,n,i+=1),a(f)&&f.count&&(i+=f.count)}else u(t)&&p(t,null,n,i)}(e,t,n)}function p(e,t,n,i){var a=l(e,t),o=f(a.a,a.b);(function(e){for(var t in e)if("a"!==t)return!0;return!1})(o)&&(n[i]=new r(r.THUNK,null,o))}function v(e,t,n){return e.splice(t,1),{from:t,key:n}}function y(e){for(var t={},n=[],i=e.length,r=0;r<i;r++){var a=e[r];a.key?t[a.key]=r:n.push(r)}return{keys:t,free:n}}function m(e,t){return e?(i(e)?e.push(t):e=[e,t],e):t}e.exports=f},function(e,t,n){var i=n(115);e.exports=i},function(e,t,n){"use strict";var i="undefined"!=typeof window?window:"undefined"!=typeof global?global:{};e.exports=function(e,t){if(e in i)return i[e];return i[e]=t,t}},function(e,t,n){"use strict";var i=n(117);e.exports=function(e,t,n){var r="__INDIVIDUAL_ONE_VERSION_"+e,a=i(r+"_ENFORCE_SINGLETON",t);if(a!==t)throw new Error("Can only have one copy of "+e+".\nYou already have version "+a+" installed.\nThis means you cannot install version "+t);return i(r,n)}},function(e,t,n){"use strict";n(118)("ev-store","7");var i="__EV_STORE_KEY@7";e.exports=function(e){var t=e[i];t||(t=e[i]={});return t}},function(e,t,n){"use strict";var i=n(119);function r(e){if(!(this instanceof r))return new r(e);this.value=e}e.exports=r,r.prototype.hook=function(e,t){i(e)[t.substr(3)]=this.value},r.prototype.unhook=function(e,t){i(e)[t.substr(3)]=void 0}},function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.value=e}e.exports=i,i.prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},function(e,t){var n,i,r;
/*!
 * Cross-Browser Split 1.1.1
 * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>
 * Available under the MIT License
 * ECMAScript compliant, uniform cross-browser split method
 */
e.exports=(i=String.prototype.split,r=/()??/.exec("")[1]===n,function(e,t,a){if("[object RegExp]"!==Object.prototype.toString.call(t))return i.call(e,t,a);var o,s,u,l,c=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),h=0;for(t=new RegExp(t.source,f+"g"),e+="",r||(o=new RegExp("^"+t.source+"$(?!\\s)",f)),a=a===n?-1>>>0:a>>>0;(s=t.exec(e))&&!((u=s.index+s[0].length)>h&&(c.push(e.slice(h,s.index)),!r&&s.length>1&&s[0].replace(o,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===n&&(s[e]=n)}),s.length>1&&s.index<e.length&&Array.prototype.push.apply(c,s.slice(1)),l=s[0].length,h=u,c.length>=a));)t.lastIndex===s.index&&t.lastIndex++;return h===e.length?!l&&t.test("")||c.push(""):c.push(e.slice(h)),c.length>a?c.slice(0,a):c})},function(e,t,n){"use strict";var i=n(122),r=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,a=/^\.|#/;e.exports=function(e,t){if(!e)return"DIV";var n,o,s,u,l=!t.hasOwnProperty("id"),c=i(e,r),f=null;a.test(c[1])&&(f="DIV");for(u=0;u<c.length;u++)(o=c[u])&&(s=o.charAt(0),f?"."===s?(n=n||[]).push(o.substring(1,o.length)):"#"===s&&l&&(t.id=o.substring(1,o.length)):f=o);n&&(t.className&&n.push(t.className),t.className=n.join(" "));return t.namespace?f:f.toUpperCase()}},function(e,t,n){var i=n(53);function r(e){this.text=String(e)}e.exports=r,r.prototype.version=i,r.prototype.type="VirtualText"},function(e,t,n){var i=n(53),r=n(54),a=n(52),o=n(56),s=n(58);e.exports=c;var u={},l=[];function c(e,t,n,i,c){this.tagName=e,this.properties=t||u,this.children=n||l,this.key=null!=i?String(i):void 0,this.namespace="string"==typeof c?c:null;var f,h=n&&n.length||0,d=0,p=!1,v=!1,y=!1;for(var m in t)if(t.hasOwnProperty(m)){var g=t[m];s(g)&&g.unhook&&(f||(f={}),f[m]=g)}for(var k=0;k<h;k++){var b=n[k];r(b)?(d+=b.count||0,!p&&b.hasWidgets&&(p=!0),!v&&b.hasThunks&&(v=!0),y||!b.hooks&&!b.descendantHooks||(y=!0)):!p&&a(b)?"function"==typeof b.destroy&&(p=!0):!v&&o(b)&&(v=!0)}this.count=h+d,this.hasWidgets=p,this.hasThunks=v,this.hooks=f,this.descendantHooks=y}c.prototype.version=i,c.prototype.type="VirtualNode"},function(e,t,n){"use strict";var i=n(62),r=n(125),a=n(124),o=n(54),s=n(57),u=n(52),l=n(58),c=n(56),f=n(123),h=n(121),d=n(120);function p(e){return o(e)||s(e)||u(e)||c(e)}function v(e){try{return JSON.stringify(e,null,"    ")}catch(t){return String(e)}}e.exports=function(e,t,n){var o,s,u,c,y=[];!n&&(m=t,"string"==typeof m||i(m)||p(m))&&(n=t,s={});var m;o=f(e,s=s||t||{}),s.hasOwnProperty("key")&&(u=s.key,s.key=void 0);s.hasOwnProperty("namespace")&&(c=s.namespace,s.namespace=void 0);"INPUT"!==o||c||!s.hasOwnProperty("value")||void 0===s.value||l(s.value)||(s.value=h(s.value));(function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(l(n))continue;"ev-"===t.substr(0,3)&&(e[t]=d(n))}})(s),void 0!==n&&null!==n&&function e(t,n,r,o){if("string"==typeof t)n.push(new a(t));else if("number"==typeof t)n.push(new a(String(t)));else if(p(t))n.push(t);else{if(!i(t)){if(null===t||void 0===t)return;throw u={foreignObject:t,parentVnode:{tagName:r,properties:o}},(l=new Error).type="virtual-hyperscript.unexpected.virtual-element",l.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+v(u.foreignObject)+".\nThe parent vnode is:\n"+v(u.parentVnode),l.foreignObject=u.foreignObject,l.parentVnode=u.parentVnode,l}for(var s=0;s<t.length;s++)e(t[s],n,r,o)}var u,l}(n,y,o,s);return new r(o,s,y,u,c)}},function(e,t){var n=9007199254740991,i="[object Arguments]",r="[object Function]",a="[object GeneratorFunction]",o=/^(?:0|[1-9]\d*)$/;function s(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var u=Object.prototype,l=u.hasOwnProperty,c=u.toString,f=u.propertyIsEnumerable,h=Math.max;function d(e,t){var n=b(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&w(e)}(e)&&l.call(e,"callee")&&(!f.call(e,"callee")||c.call(e)==i)}(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],r=n.length,a=!!r;for(var o in e)!t&&!l.call(e,o)||a&&("length"==o||g(o,r))||n.push(o);return n}function p(e,t,n,i){return void 0===e||k(e,u[n])&&!l.call(i,n)?t:e}function v(e,t,n){var i=e[t];l.call(e,t)&&k(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function y(e){if(!P(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n,i,r=(n=(t=e)&&t.constructor,i="function"==typeof n&&n.prototype||u,t===i),a=[];for(var o in e)("constructor"!=o||!r&&l.call(e,o))&&a.push(o);return a}function m(e,t){return t=h(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,r=h(n.length-t,0),a=Array(r);++i<r;)a[i]=n[t+i];i=-1;for(var o=Array(t+1);++i<t;)o[i]=n[i];return o[t]=a,s(e,this,o)}}function g(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}function k(e,t){return e===t||e!=e&&t!=t}var b=Array.isArray;function w(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=P(e)?c.call(e):"";return t==r||t==a}(e)}function P(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var x,T=(x=function(e,t,n,i){!function(e,t,n,i){n||(n={});for(var r=-1,a=t.length;++r<a;){var o=t[r],s=i?i(n[o],e[o],o,n,e):void 0;v(n,o,void 0===s?e[o]:s)}}(t,function(e){return w(e)?d(e,!0):y(e)}(t),e,i)},m(function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(r=x.length>3&&"function"==typeof r?(i--,r):void 0,a&&function(e,t,n){if(!P(n))return!1;var i=typeof t;return!!("number"==i?w(n)&&g(t,n.length):"string"==i&&t in n)&&k(n[t],e)}(t[0],t[1],a)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var o=t[n];o&&x(e,o,n,r)}return e})),O=m(function(e){return e.push(void 0,p),s(T,void 0,e)});e.exports=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=g(n(127)),a=g(n(55)),o=g(n(116)),s=g(n(113)),u=g(n(108)),l=n(51),c=g(n(107)),f=g(n(104)),h=g(n(103)),d=g(n(101)),p=g(n(87)),v=g(n(86)),y=g(n(80)),m=g(n(79));function g(e){return e&&e.__esModule?e:{default:e}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tracks=[],this.soloedTracks=[],this.mutedTracks=[],this.playoutPromises=[],this.cursor=0,this.playbackSeconds=0,this.duration=0,this.scrollLeft=0,this.scrollTimer=void 0,this.showTimescale=!1,this.isScrolling=!1,this.fadeType="logarithmic",this.masterGain=1,this.annotations=[],this.durationFormat="hh:mm:ss.uuu",this.isAutomaticScroll=!1,this.resetDrawTimer=void 0}return i(e,[{key:"initExporter",value:function(){this.exportWorker=new u.default(m.default)}},{key:"initRecorder",value:function(e){var t=this;this.mediaRecorder=new window.MediaRecorder(e),this.mediaRecorder.onstart=function(){var e=new d.default;e.setName("Recording"),e.setEnabledStates(),e.setEventEmitter(t.ee),t.recordingTrack=e,t.tracks.push(e),t.chunks=[],t.working=!1},this.mediaRecorder.ondataavailable=function(e){if(t.chunks.push(e.data),!t.working){var n=new Blob(t.chunks,{type:"audio/ogg; codecs=opus"});c.default.createLoader(n,t.ac).load().then(function(e){t.recorderWorker.postMessage({samples:e.getChannelData(0),samplesPerPixel:t.samplesPerPixel}),t.recordingTrack.setCues(0,e.duration),t.recordingTrack.setBuffer(e),t.recordingTrack.setPlayout(new p.default(t.ac,e)),t.adjustDuration()}),t.working=!0}},this.mediaRecorder.onstop=function(){t.chunks=[],t.working=!1},this.recorderWorker=new u.default(y.default),this.recorderWorker.onmessage=function(e){t.recordingTrack.setPeaks(e.data),t.working=!1,t.drawRequest()}}},{key:"setShowTimeScale",value:function(e){this.showTimescale=e}},{key:"setMono",value:function(e){this.mono=e}},{key:"setExclSolo",value:function(e){this.exclSolo=e}},{key:"setSeekStyle",value:function(e){this.seekStyle=e}},{key:"getSeekStyle",value:function(){return this.seekStyle}},{key:"setSampleRate",value:function(e){this.sampleRate=e}},{key:"setSamplesPerPixel",value:function(e){this.samplesPerPixel=e}},{key:"setAudioContext",value:function(e){this.ac=e}},{key:"setControlOptions",value:function(e){this.controls=e}},{key:"setWaveHeight",value:function(e){this.waveHeight=e}},{key:"setColors",value:function(e){this.colors=e}},{key:"setAnnotations",value:function(e){this.annotationList=new v.default(this,e.annotations,e.controls,e.editable,e.linkEndpoints,e.isContinuousPlay)}},{key:"setEventEmitter",value:function(e){this.ee=e}},{key:"getEventEmitter",value:function(){return this.ee}},{key:"setUpEventEmitter",value:function(){var e=this,t=this.ee;t.on("automaticscroll",function(t){e.isAutomaticScroll=t}),t.on("durationformat",function(t){e.durationFormat=t,e.drawRequest()}),t.on("select",function(t,n,i){e.isPlaying()?(e.lastSeeked=t,e.pausedAt=void 0,e.restartPlayFrom(t)):(e.seek(t,n,i),e.ee.emit("timeupdate",t),e.drawRequest())}),t.on("startaudiorendering",function(t){e.startOfflineRender(t)}),t.on("statechange",function(t){e.setState(t),e.drawRequest()}),t.on("shift",function(t,n){n.setStartTime(n.getStartTime()+t),e.adjustDuration(),e.drawRequest()}),t.on("record",function(){e.record()}),t.on("play",function(t,n){e.play(t,n)}),t.on("pause",function(){e.pause()}),t.on("stop",function(){e.stop()}),t.on("rewind",function(){e.rewind()}),t.on("fastforward",function(){e.fastForward()}),t.on("clear",function(){e.clear().then(function(){e.drawRequest()})}),t.on("solo",function(t){e.soloTrack(t),e.adjustTrackPlayout(),e.drawRequest()}),t.on("mute",function(t){e.muteTrack(t),e.adjustTrackPlayout(),e.drawRequest()}),t.on("volumechange",function(e,t){t.setGainLevel(e/100)}),t.on("mastervolumechange",function(t){e.masterGain=t/100,e.tracks.forEach(function(t){t.setMasterGainLevel(e.masterGain)})}),t.on("fadein",function(t,n){n.setFadeIn(t,e.fadeType),e.drawRequest()}),t.on("fadeout",function(t,n){n.setFadeOut(t,e.fadeType),e.drawRequest()}),t.on("fadetype",function(t){e.fadeType=t}),t.on("newtrack",function(t){e.load([{src:t,name:t.name}])}),t.on("trim",function(){var t=e.getActiveTrack(),n=e.getTimeSelection();t.trim(n.start,n.end),t.calculatePeaks(e.samplesPerPixel,e.sampleRate),e.setTimeSelection(0,0),e.drawRequest()}),t.on("zoomin",function(){var t=Math.max(0,e.zoomIndex-1),n=e.zoomLevels[t];n!==e.samplesPerPixel&&(e.setZoom(n),e.drawRequest())}),t.on("zoomout",function(){var t=Math.min(e.zoomLevels.length-1,e.zoomIndex+1),n=e.zoomLevels[t];n!==e.samplesPerPixel&&(e.setZoom(n),e.drawRequest())}),t.on("scroll",function(){e.isScrolling=!0,e.drawRequest(),clearTimeout(e.scrollTimer),e.scrollTimer=setTimeout(function(){e.isScrolling=!1},200)})}},{key:"load",value:function(e){var t=this,n=e.map(function(e){return c.default.createLoader(e.src,t.ac,t.ee).load()});return Promise.all(n).then(function(n){t.ee.emit("audiosourcesloaded");var i=n.map(function(n,i){var r=e[i],a=r.name||"Untitled",o=r.start||0,s=r.states||{},u=r.fadeIn,l=r.fadeOut,c=r.cuein||0,f=r.cueout||n.duration,h=r.gain||1,v=r.muted||!1,y=r.soloed||!1,m=r.selected,g=r.peaks||{type:"WebAudio",mono:t.mono},k=r.customClass||void 0,b=r.waveOutlineColor||void 0,w=new p.default(t.ac,n),P=new d.default;return P.src=r.src,P.setBuffer(n),P.setName(a),P.setEventEmitter(t.ee),P.setEnabledStates(s),P.setCues(c,f),P.setCustomClass(k),P.setWaveOutlineColor(b),void 0!==u&&P.setFadeIn(u.duration,u.shape),void 0!==l&&P.setFadeOut(l.duration,l.shape),void 0!==m&&(t.setActiveTrack(P),t.setTimeSelection(m.start,m.end)),void 0!==g&&P.setPeakData(g),P.setState(t.getState()),P.setStartTime(o),P.setPlayout(w),P.setGainLevel(h),v&&t.muteTrack(P),y&&t.soloTrack(P),P.calculatePeaks(t.samplesPerPixel,t.sampleRate),P});t.tracks=t.tracks.concat(i),t.adjustDuration(),t.draw(t.render()),t.ee.emit("audiosourcesrendered")})}},{key:"setActiveTrack",value:function(e){this.activeTrack=e}},{key:"getActiveTrack",value:function(){return this.activeTrack}},{key:"isSegmentSelection",value:function(){return this.timeSelection.start!==this.timeSelection.end}},{key:"setTimeSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1];this.timeSelection={start:e,end:void 0===t?e:t},this.cursor=e}},{key:"startOfflineRender",value:function(e){var t=this;if(!this.isRendering){this.isRendering=!0,this.offlineAudioContext=new OfflineAudioContext(2,44100*this.duration,44100);var n=this.offlineAudioContext.currentTime;this.tracks.forEach(function(e){e.setOfflinePlayout(new p.default(t.offlineAudioContext,e.buffer)),e.schedulePlay(n,0,0,{shouldPlay:t.shouldTrackPlay(e),masterGain:1,isOffline:!0})}),this.offlineAudioContext.startRendering().then(function(n){if("buffer"===e)return t.ee.emit("audiorenderingfinished",e,n),void(t.isRendering=!1);"wav"===e&&(t.exportWorker.postMessage({command:"init",config:{sampleRate:44100}}),t.exportWorker.onmessage=function(n){t.ee.emit("audiorenderingfinished",e,n.data),t.isRendering=!1,t.exportWorker.postMessage({command:"clear"})},t.exportWorker.postMessage({command:"record",buffer:[n.getChannelData(0),n.getChannelData(1)]}),t.exportWorker.postMessage({command:"exportWAV",type:"audio/wav"}))}).catch(function(e){throw e})}}},{key:"getTimeSelection",value:function(){return this.timeSelection}},{key:"setState",value:function(e){this.state=e,this.tracks.forEach(function(t){t.setState(e)})}},{key:"getState",value:function(){return this.state}},{key:"setZoomIndex",value:function(e){this.zoomIndex=e}},{key:"setZoomLevels",value:function(e){this.zoomLevels=e}},{key:"setZoom",value:function(e){var t=this;this.samplesPerPixel=e,this.zoomIndex=this.zoomLevels.indexOf(e),this.tracks.forEach(function(n){n.calculatePeaks(e,t.sampleRate)})}},{key:"muteTrack",value:function(e){var t=this.mutedTracks.indexOf(e);t>-1?this.mutedTracks.splice(t,1):this.mutedTracks.push(e)}},{key:"soloTrack",value:function(e){var t=this.soloedTracks.indexOf(e);t>-1?this.soloedTracks.splice(t,1):this.exclSolo?this.soloedTracks=[e]:this.soloedTracks.push(e)}},{key:"adjustTrackPlayout",value:function(){var e=this;this.tracks.forEach(function(t){t.setShouldPlay(e.shouldTrackPlay(t))})}},{key:"adjustDuration",value:function(){this.duration=this.tracks.reduce(function(e,t){return Math.max(e,t.getEndTime())},0)}},{key:"shouldTrackPlay",value:function(e){var t=void 0;return this.soloedTracks.length>0?(t=!1,this.soloedTracks.indexOf(e)>-1&&(t=!0)):(t=!0,this.mutedTracks.indexOf(e)>-1&&(t=!1)),t}},{key:"isPlaying",value:function(){return this.tracks.reduce(function(e,t){return e||t.isPlaying()},!1)}},{key:"getCurrentTime",value:function(){return(this.lastSeeked||this.pausedAt||this.cursor)+this.getElapsedTime()}},{key:"getElapsedTime",value:function(){return this.ac.currentTime-this.lastPlay}},{key:"setMasterGain",value:function(e){this.ee.emit("mastervolumechange",e)}},{key:"restartPlayFrom",value:function(e,t){return this.stopAnimation(),this.tracks.forEach(function(e){e.scheduleStop()}),Promise.all(this.playoutPromises).then(this.play.bind(this,e,t))}},{key:"play",value:function(e,t){var n=this;clearTimeout(this.resetDrawTimer);var i=this.ac.currentTime,r=this.getTimeSelection(),a=[],o=e||this.pausedAt||this.cursor,s=t;return!s&&r.end!==r.start&&r.end>o&&(s=r.end),this.isPlaying()?this.restartPlayFrom(o,s):(this.tracks.forEach(function(e){e.setState("cursor"),a.push(e.schedulePlay(i,o,s,{shouldPlay:n.shouldTrackPlay(e),masterGain:n.masterGain}))}),this.lastPlay=i,this.playoutPromises=a,this.startAnimation(o),Promise.all(this.playoutPromises))}},{key:"pause",value:function(){return this.isPlaying()?(this.pausedAt=this.getCurrentTime(),this.playbackReset()):Promise.all(this.playoutPromises)}},{key:"stop",value:function(){return this.mediaRecorder&&"recording"===this.mediaRecorder.state&&this.mediaRecorder.stop(),this.pausedAt=void 0,this.playbackSeconds=0,this.playbackReset()}},{key:"playbackReset",value:function(){var e=this;return this.lastSeeked=void 0,this.stopAnimation(),this.tracks.forEach(function(t){t.scheduleStop(),t.setState(e.getState())}),this.drawRequest(),Promise.all(this.playoutPromises)}},{key:"rewind",value:function(){var e=this;return this.stop().then(function(){e.scrollLeft=0,e.ee.emit("select",0,0)})}},{key:"fastForward",value:function(){var e=this;return this.stop().then(function(){e.viewDuration<e.duration?e.scrollLeft=e.duration-e.viewDuration:e.scrollLeft=0,e.ee.emit("select",e.duration,e.duration)})}},{key:"clear",value:function(){var e=this;return this.stop().then(function(){e.tracks=[],e.soloedTracks=[],e.mutedTracks=[],e.playoutPromises=[],e.cursor=0,e.playbackSeconds=0,e.duration=0,e.scrollLeft=0,e.seek(0,0,void 0)})}},{key:"record",value:function(){var e=this,t=[];this.mediaRecorder.start(300),this.tracks.forEach(function(n){n.setState("none"),t.push(n.schedulePlay(e.ac.currentTime,0,void 0,{shouldPlay:e.shouldTrackPlay(n)}))}),this.playoutPromises=t}},{key:"startAnimation",value:function(e){var t=this;this.lastDraw=this.ac.currentTime,this.animationRequest=window.requestAnimationFrame(function(){t.updateEditor(e)})}},{key:"stopAnimation",value:function(){window.cancelAnimationFrame(this.animationRequest),this.lastDraw=void 0}},{key:"seek",value:function(e,t,n){this.isPlaying()?(this.lastSeeked=e,this.pausedAt=void 0,this.restartPlayFrom(e)):(this.setActiveTrack(n||this.tracks[0]),this.pausedAt=e,this.setTimeSelection(e,t),"fill"===this.getSeekStyle()&&(this.playbackSeconds=e))}},{key:"updateEditor",value:function(e){var t=this,n=this.ac.currentTime,i=this.getTimeSelection(),r=e||this.cursor,a=n-this.lastDraw;if(this.isPlaying()){var o=r+a;this.ee.emit("timeupdate",o),this.animationRequest=window.requestAnimationFrame(function(){t.updateEditor(o)}),this.playbackSeconds=o,this.draw(this.render()),this.lastDraw=n}else r+a>=(this.isSegmentSelection()?i.end:this.duration)&&this.ee.emit("finished"),this.stopAnimation(),this.resetDrawTimer=setTimeout(function(){t.pausedAt=void 0,t.lastSeeked=void 0,t.setState(t.getState()),t.playbackSeconds=0,t.draw(t.render())},0)}},{key:"drawRequest",value:function(){var e=this;window.requestAnimationFrame(function(){e.draw(e.render())})}},{key:"draw",value:function(e){var t=(0,o.default)(this.tree,e);this.rootNode=(0,s.default)(this.rootNode,t),this.tree=e,this.viewDuration=(0,l.pixelsToSeconds)(this.rootNode.clientWidth-this.controls.width,this.samplesPerPixel,this.sampleRate)}},{key:"getTrackRenderData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={height:this.waveHeight,resolution:this.samplesPerPixel,sampleRate:this.sampleRate,controls:this.controls,isActive:!1,timeSelection:this.getTimeSelection(),playlistLength:this.duration,playbackSeconds:this.playbackSeconds,colors:this.colors};return(0,r.default)(e,t)}},{key:"isActiveTrack",value:function(e){var t=this.getActiveTrack();return!this.isSegmentSelection()||t===e}},{key:"renderAnnotations",value:function(){return this.annotationList.render()}},{key:"renderTimeScale",value:function(){var e=this.controls.show?this.controls.width:0;return new h.default(this.duration,this.scrollLeft,this.samplesPerPixel,this.sampleRate,e).render()}},{key:"renderTrackSection",value:function(){var e=this,t=this.tracks.map(function(t){return t.render(e.getTrackRenderData({isActive:e.isActiveTrack(t),shouldPlay:e.shouldTrackPlay(t),soloed:e.soloedTracks.indexOf(t)>-1,muted:e.mutedTracks.indexOf(t)>-1}))});return(0,a.default)("div.playlist-tracks",{attributes:{style:"overflow: auto;"},onscroll:function(t){e.scrollLeft=(0,l.pixelsToSeconds)(t.target.scrollLeft,e.samplesPerPixel,e.sampleRate),e.ee.emit("scroll",e.scrollLeft)},hook:new f.default(this)},t)}},{key:"render",value:function(){var e=[];return this.showTimescale&&e.push(this.renderTimeScale()),e.push(this.renderTrackSection()),this.annotationList.length&&e.push(this.renderAnnotations()),(0,a.default)("div.playlist",{attributes:{style:"overflow: hidden; position: relative;"}},e)}},{key:"getInfo",value:function(){var e=[];return this.tracks.forEach(function(t){e.push(t.getTrackDetails())}),e}}]),e}();t.default=k},function(e,t,n){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,n){"use strict";var i=String.prototype.indexOf;e.exports=function(e){return i.call(this,e,arguments[1])>-1}},function(e,t,n){"use strict";var i="razdwatrzy";e.exports=function(){return"function"==typeof i.contains&&(!0===i.contains("dwa")&&!1===i.contains("foo"))}},function(e,t,n){"use strict";e.exports=n(131)()?String.prototype.contains:n(130)},function(e,t,n){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";var i=n(63),r=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return r.call(arguments,function(e){i(e)&&function(e,t){var n;for(n in e)t[n]=e[n]}(Object(e),t)}),t}},function(e,t,n){"use strict";var i=n(63);e.exports=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";var i=n(63),r=Object.keys;e.exports=function(e){return r(i(e)?Object(e):e)}},function(e,t,n){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,n){"use strict";e.exports=n(138)()?Object.keys:n(137)},function(e,t,n){"use strict";var i=n(139),r=n(135),a=Math.max;e.exports=function(e,t){var n,o,s,u=a(arguments.length,2);for(e=Object(r(e)),s=function(i){try{e[i]=t[i]}catch(e){n||(n=e)}},o=1;o<u;++o)t=arguments[o],i(t).forEach(s);if(void 0!==n)throw n;return e}},function(e,t,n){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,n){"use strict";e.exports=n(141)()?Object.assign:n(140)},function(e,t,n){"use strict";var i=n(142),r=n(134),a=n(133),o=n(132);(e.exports=function(e,t){var n,a,s,u,l;return arguments.length<2||"string"!=typeof e?(u=t,t=e,e=null):u=arguments[2],null==e?(n=s=!0,a=!1):(n=o.call(e,"c"),a=o.call(e,"e"),s=o.call(e,"w")),l={value:t,configurable:n,enumerable:a,writable:s},u?i(r(u),l):l}).gs=function(e,t,n){var s,u,l,c;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],null==t?t=void 0:a(t)?null==n?n=void 0:a(n)||(l=n,n=void 0):(l=t,t=n=void 0),null==e?(s=!0,u=!1):(s=o.call(e,"c"),u=o.call(e,"e")),c={get:t,set:n,configurable:s,enumerable:u},l?i(r(l),c):c}},,function(e,t,n){var i=n(75);e.exports=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=u,t.default=function(){return u(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.default)())};var i=s(n(76)),r=s(n(145)),a=s(n(70)),o=s(n(128));function s(e){return e&&e.__esModule?e:{default:e}}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,a.default)();if(void 0===e.container)throw new Error("DOM element container must be given.");window.OfflineAudioContext=window.OfflineAudioContext||window.webkitOfflineAudioContext,window.AudioContext=window.AudioContext||window.webkitAudioContext;var n=new window.AudioContext,s={ac:n,sampleRate:n.sampleRate,samplesPerPixel:4096,mono:!0,fadeType:"logarithmic",exclSolo:!1,timescale:!1,controls:{show:!1,width:150},colors:{waveOutlineColor:"white",timeColor:"grey",fadeColor:"black"},seekStyle:"line",waveHeight:128,state:"cursor",zoomLevels:[512,1024,2048,4096],annotationList:{annotations:[],controls:[],editable:!1,linkEndpoints:!1,isContinuousPlay:!1},isAutomaticScroll:!1},u=(0,i.default)(s,e),l=u.zoomLevels.indexOf(u.samplesPerPixel);if(-1===l)throw new Error("initial samplesPerPixel must be included in array zoomLevels");var c=new o.default;c.setSampleRate(u.sampleRate),c.setSamplesPerPixel(u.samplesPerPixel),c.setAudioContext(u.ac),c.setEventEmitter(t),c.setUpEventEmitter(),c.setTimeSelection(0,0),c.setState(u.state),c.setControlOptions(u.controls),c.setWaveHeight(u.waveHeight),c.setColors(u.colors),c.setZoomLevels(u.zoomLevels),c.setZoomIndex(l),c.setMono(u.mono),c.setExclSolo(u.exclSolo),c.setShowTimeScale(u.timescale),c.setSeekStyle(u.seekStyle),c.setAnnotations(u.annotationList),c.isAutomaticScroll=u.isAutomaticScroll,c.isContinuousPlay=u.isContinuousPlay,c.linkedEndpoints=u.linkedEndpoints;var f=c.render(),h=(0,r.default)(f);return u.container.appendChild(h),c.tree=f,c.rootNode=h,c}}])]);